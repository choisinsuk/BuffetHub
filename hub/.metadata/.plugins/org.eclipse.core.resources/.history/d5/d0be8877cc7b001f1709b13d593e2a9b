package com.hub.service;

import org.modelmapper.ModelMapper;
import org.springframework.stereotype.Service;

import com.hub.domain.BuffetVoucher;
import com.hub.dto.BuffetVoucherDTO;
import com.hub.repository.BuffetVoucherRepository;

import jakarta.transaction.Transactional;
import lombok.RequiredArgsConstructor;
import lombok.extern.log4j.Log4j2;

@Service
@Transactional
@Log4j2
@RequiredArgsConstructor // 생성자 자동 주입
public class BuffetVoucherServiceImpl implements BuffetVoucherService {

	// 자동주입 대상은 final로
	private final ModelMapper modelMapper;
	private final BuffetVoucherRepository buffetVoucherRepository;
	
	@Override
	public Integer register(BuffetVoucherDTO buffetVoucherDTO) {
		
		BuffetVoucher buffetVoucher = modelMapper.map(buffetVoucherDTO, BuffetVoucher.class);
		BuffetVoucher savedbuBuffetVoucher = buffetVoucherRepository.save(buffetVoucher);
		
		return savedbuBuffetVoucher.getBv_nb();
	}

}
